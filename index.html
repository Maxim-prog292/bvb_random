<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Мой билет в будущее</title>
    <style>
      :root {
        --accent: #60a5fa;
        --accent-2: #a78bfa;
        --glass: rgba(255, 255, 255, 0.16);
        --glass-strong: rgba(255, 255, 255, 0.22);
        --border: rgba(255, 255, 255, 0.25);
        --shadow: rgba(128, 128, 128, 0.35);
        --safe-pad: max(16px, env(safe-area-inset-left));
      }

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        display: grid;
        place-items: center;
        background: linear-gradient(135deg, #ffa14a, #b38eff, #13ce75, #fa417a);
        background-size: 600% 600%;
        animation: gradientShift 30s ease infinite;
        color: #f8fafc;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
          Cantarell, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
        overflow: hidden;
        cursor: none; /* скрыть курсор */
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        25% {
          background-position: 50% 0%;
        }
        50% {
          background-position: 100% 50%;
        }
        75% {
          background-position: 50% 100%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .container {
        width: min(920px, 100vw);
        display: grid;
        gap: clamp(16px, 3vw, 28px);
        justify-items: center;
        text-align: center;
        padding: clamp(16px, 3vw, 24px);
        padding-left: max(16px, env(safe-area-inset-left));
        padding-right: max(16px, env(safe-area-inset-right));
        padding-bottom: max(16px, env(safe-area-inset-bottom));
        box-sizing: border-box;
        position: relative;
        z-index: 1;
      }

      h1 {
        margin: 0;
        font-weight: 800;
        line-height: 1.1;
        letter-spacing: 0.2px;
        font-size: clamp(24px, 3.6vw, 42px);
        background: linear-gradient(90deg, #fff, #dbeafe 45%, #e9d5ff);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 0 2px 16px rgba(255, 255, 255, 0.15);
      }

      /* Фоновые надписи */
      .bg-phrases {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
      }
      .bg-phrase {
        position: absolute;
        white-space: nowrap;
        font-weight: 800;
        font-size: clamp(18px, 5.2vw, 72px);
        line-height: 1.1;
        color: #ffffff;
        opacity: 0;
        filter: drop-shadow(0 2px 10px rgba(0, 0, 0, 0.25));
        mix-blend-mode: screen;
        transition: opacity 2s ease-in-out;
        animation: floatY var(--dur, 18s) ease-in-out infinite alternate,
          floatX calc(var(--dur, 18s) * 1.25) ease-in-out infinite alternate;
      }
      .bg-phrase.visible {
        opacity: 0.12;
      }

      .serif-i {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-style: italic;
        letter-spacing: 0.3px;
      }
      @keyframes floatY {
        from {
          transform: translateY(-8px);
        }
        to {
          transform: translateY(8px);
        }
      }
      @keyframes floatX {
        from {
          transform: translateX(-10px);
        }
        to {
          transform: translateX(10px);
        }
      }

      /* Кнопка с изображением */
      .glass-btn {
        width: 400px;
        height: 400px;
        -webkit-tap-highlight-color: transparent;
        position: relative;
        border: 1px solid var(--border);
        background: linear-gradient(
          180deg,
          var(--glass-strong),
          rgba(255, 255, 255, 0.08)
        );
        backdrop-filter: blur(28px) saturate(140%);
        -webkit-backdrop-filter: blur(28px) saturate(140%);
        box-shadow: 0 10px 30px var(--shadow),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
        padding: 0;
        border-radius: 100%;
        transition: transform 0.18s ease, box-shadow 0.18s ease,
          border-color 0.18s ease;
        overflow: hidden;
        isolation: isolate;
        cursor: none; /* скрыть курсор */
      }

      .glass-btn img {
        display: block;
        width: 100%;
        height: auto;
        cursor: none; /* скрыть курсор */
      }

      .glass-btn:hover {
        transform: translateY(-1px) scale(1.02);
        border-color: rgba(255, 255, 255, 0.45);
      }
      .glass-btn:active {
        transform: translateY(0) scale(0.99);
      }

      .glass-btn::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          transparent 20%,
          rgba(255, 255, 255, 0.18) 40%,
          transparent 60%
        );
        transform: translateX(-120%);
        transition: transform 0.7s ease;
        pointer-events: none;
      }
      .glass-btn:hover::before {
        transform: translateX(120%);
      }

      .glass-btn::after {
        content: "";
        position: absolute;
        inset: -2px;
        border-radius: 26px;
        padding: 1px;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        -webkit-mask: linear-gradient(#000 0 0) content-box,
          linear-gradient(#000 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0.65;
        filter: blur(10px) saturate(140%);
        z-index: -1;
      }

      /* Результат */
      .result {
        min-height: clamp(120px, 18vh, 220px);
        display: grid;
        place-items: center;
        width: min(880px, calc(100vw - 32px));
        padding: clamp(20px, 3.5vw, 36px);
        border-radius: 28px;
        border: 1px solid rgba(255, 255, 255, 0.22);
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(6px) saturate(140%);
        -webkit-backdrop-filter: blur(24px) saturate(140%);
        box-shadow: 0 10px 40px var(--shadow),
          inset 0 1px 0 rgba(255, 255, 255, 0.35);
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.35);
        box-sizing: border-box;
        overflow-wrap: break-word;
        word-break: break-word;
      }

      .result-text {
        font-size: clamp(24px, 5vw, 44px);
        font-weight: 800;
        letter-spacing: 0.4px;
        line-height: 1.2;
        margin: 0;
        background: linear-gradient(90deg, #ffffff, #f0f9ff 40%, #f5e8ff);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        opacity: 0.98;
      }

      .shake {
        animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
      }
      @keyframes shake {
        10%,
        90% {
          transform: translateX(-1px);
        }
        20%,
        80% {
          transform: translateX(2px);
        }
        30%,
        50%,
        70% {
          transform: translateX(-3px);
        }
        40%,
        60% {
          transform: translateX(3px);
        }
      }

      .fade-in-up {
        animation: fadeInUp 0.45s ease both;
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(8px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .burst {
        position: absolute;
        inset: 0;
        pointer-events: none;
        overflow: visible;
      }
      .dot {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: radial-gradient(
          circle at 30% 30%,
          #fff,
          #e0f2fe 40%,
          #c7d2fe 70%,
          transparent 100%
        );
        opacity: 0.95;
        filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.25));
        animation: fly 700ms ease-out forwards;
      }
      @keyframes fly {
        to {
          transform: translate(var(--dx), var(--dy)) scale(0.1);
          opacity: 0;
        }
      }

      @media (max-width: 480px) {
        .glass-btn {
          border-radius: 18px;
          max-width: calc(100vw - 24px);
        }
        .result {
          border-radius: 18px;
          width: calc(100vw - 24px);
          padding: 18px;
        }
        .bg-phrase {
          font-size: clamp(18px, 6vw, 56px);
        }
      }

      @media (max-height: 560px) {
        body {
          overflow: auto;
        }
        .container {
          padding-top: 20px;
          padding-bottom: 24px;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-phrases" aria-hidden="true"></div>

    <div class="container">
      <!-- <h1>Билет в будущее</h1> -->

      <button
        id="goBtn"
        class="glass-btn"
        aria-live="polite"
        aria-label="какой у меня билет в будущее?"
      >
        <img src="Ресурс 1.png" alt="Билет в будущее Тверь" />
        <span class="burst" aria-hidden="true"></span>
      </button>

      <div class="result" role="status" aria-live="polite">
        <p id="resultText" class="result-text">&nbsp;</p>
      </div>
    </div>

    <script>
      const btn = document.getElementById("goBtn");
      const result = document.getElementById("resultText");
      const burst = btn.querySelector(".burst");

      const environments = [
        "Умная среда",
        "Креативная среда",
        "Социальная среда",
        "Аграрная среда",
      ];

      function particleBurst(x, y) {
        const container = document.body;
        const burstElem = document.createElement("div");
        burstElem.className = "burst";
        container.appendChild(burstElem);

        const count = 16;
        for (let i = 0; i < count; i++) {
          const dot = document.createElement("span");
          dot.className = "dot";
          const angle = Math.PI * 2 * (i / count) + Math.random() * 0.25;
          const distance = 60 + Math.random() * 60;
          const dx = Math.cos(angle) * distance + "px";
          const dy = Math.sin(angle) * distance + "px";
          dot.style.setProperty("--dx", dx);
          dot.style.setProperty("--dy", dy);
          dot.style.left = x - 5 + "px";
          dot.style.top = y - 5 + "px";
          burstElem.appendChild(dot);
          dot.addEventListener("animationend", () => dot.remove());
        }
        setTimeout(() => burstElem.remove(), 1000);
      }

      function roll(clickX, clickY) {
        btn.classList.remove("shake");
        void btn.offsetWidth;
        btn.classList.add("shake");

        result.textContent = "…";
        result.classList.remove("fade-in-up");

        particleBurst(clickX, clickY);

        setTimeout(() => {
          const pick =
            environments[Math.floor(Math.random() * environments.length)];
          result.textContent = pick;
          result.classList.add("fade-in-up");
        }, 300);
      }

      document.body.addEventListener("click", (e) => {
        if (e.target.closest("#goBtn")) return;
        roll(e.clientX, e.clientY);
      });

      btn.addEventListener("click", (e) => {
        roll(e.clientX, e.clientY);
      });

      btn.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          roll(window.innerWidth / 2, window.innerHeight / 2);
        }
      });

      // Для всего экрана
      document.body.addEventListener("touchstart", (e) => {
        const touch = e.touches[0];
        if (!touch) return;
        if (e.target.closest("#goBtn")) return;
        roll(touch.clientX, touch.clientY);
      });

      // Для кнопки
      btn.addEventListener("touchstart", (e) => {
        const touch = e.touches[0];
        if (!touch) return;
        roll(touch.clientX, touch.clientY);
      });

      const bg = document.querySelector(".bg-phrases");
      const phrases = [
        'Твоя цель,<br> твой путь,<br> твоя <em class="serif-i">профессия</em>',
        "Не профессия выбирает человека,<br> а человек выбирает профессию.",
        'Билет в будущее <em class="serif-i"><br>уже у тебя в руках</em>',
      ];

      function makeBgPhrase({ top, left, dur = "22s" }) {
        const el = document.createElement("div");
        el.className = "bg-phrase";
        el.style.top = top;
        el.style.left = left;
        el.style.setProperty("--dur", dur);
        bg.appendChild(el);
        return el;
      }

      const bgEls = [
        makeBgPhrase({ top: "18%", left: "8%", dur: "24s" }),
        makeBgPhrase({ top: "72%", left: "12%", dur: "28s" }),
        makeBgPhrase({ top: "44%", left: "68%", dur: "26s" }),
      ];

      let cur = 0;
      function rotatePhrases() {
        cur = (cur + 1) % phrases.length;
        bgEls.forEach((el, i) => {
          const text = phrases[(cur + i) % phrases.length];
          el.classList.remove("visible");
          setTimeout(() => {
            el.innerHTML = text;
            el.classList.add("visible");
          }, 1000);
        });
      }

      bgEls.forEach((el, i) => {
        const text = phrases[(cur + i) % phrases.length];
        el.innerHTML = text;
        el.classList.add("visible");
      });

      setInterval(rotatePhrases, 6000);
    </script>
  </body>
</html>
